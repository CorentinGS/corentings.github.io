<!DOCTYPE html><html lang="en"><head><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="none"><script async src="https://umami.memnix.app/script.js" data-website-id="fca9df7f-70a1-466a-9fc8-d745bb4c33f0"></script><script>
        // ☝️ This script prevent the FART effect.
        if (localStorage.getItem("theme") === null) {
            document.documentElement.setAttribute("data-theme", "light")
        } else document.documentElement.setAttribute("data-theme", localStorage.getItem("theme"))
        // "theme" LocalStorage value is set by the package to remember user preference.
        // The value is checked and applyed before rendering anything.
    </script><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v3.0.2"><link rel="icon" href="/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><meta name="description" content="This is a simple example of how to use goroutines to implement a merge sort algorithm."><meta name="og:title" content="Merge Sort using Goroutines"><meta name="og:site_name" content="CorentinGS"><meta name="article:author" content="Corentin Giaufer--Saubert"><meta name="article:published_time" content="Jan. 15, 2023"><meta name="og:description" content="This is a simple example of how to use goroutines to implement a merge sort algorithm."><meta name="og:type" content="article"><meta name="og:url" content="https://corentings.dev"><meta name="og:image" content="[object Object]"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="https://corentings.dev"><meta name="twitter:creator" content="GSCorentinDev"><meta name="twitter:title" content="Merge Sort using Goroutines"><meta name="twitter:description" content="This is a simple example of how to use goroutines to implement a merge sort algorithm."><meta name="twitter:image" content="[object Object]"><link rel="alternate" hreflang="x-default" href="https://corentings.dev/blog/mergesort-parallel"><link rel="alternate" hreflang="en" href="https://corentings.dev/blog/mergesort-parallel"><link rel="alternate" hreflang="fr" href="https://corentings.dev/fr/blog/mergesort-parallel"><link rel="alternate" hreflang="de" href="https://corentings.dev/de/blog/mergesort-parallel"><title>Merge Sort using Goroutines</title><link rel="stylesheet" href="/_astro/blog.9db58d19.css" />
<link rel="stylesheet" href="/_astro/dnf5-step-by-step.9ff3c03e.css" />
<style type="text/css">@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0}}@keyframes astroFadeOut{to{opacity:0}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
</style><script type="module" src="/_astro/hoisted.2ec8a331.js"></script>
<script type="module" src="/_astro/page.30c903a1.js"></script><style>[data-astro-transition-scope="astro-b7phifci-1"] { view-transition-name: astro-b7phifci-1; }@layer astro { ::view-transition-old(astro-b7phifci-1) { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }::view-transition-new(astro-b7phifci-1) { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back]::view-transition-old(astro-b7phifci-1) { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back]::view-transition-new(astro-b7phifci-1) { 
	animation-name: astroFadeIn, astroSlideFromLeft; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-b7phifci-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-b7phifci-1"] { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-b7phifci-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-b7phifci-1"] { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-b7phifci-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-b7phifci-1"] { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-b7phifci-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-b7phifci-1"] { 
	animation-name: astroFadeIn, astroSlideFromLeft; }</style></head><body><main data-astro-transition-scope="astro-b7phifci-1"><!-- Navbar --><div class="navbar bg-base-200"><div class="navbar-start"><label for="my-modal-6" class="btn btn-ghost lg:hidden"><svg class="inline-block h-6 w-6 stroke-current" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></label><a class="hoveranimation btn-ghost btn text-xl normal-case lg:text-3xl" href="/" rel="prefetch"><h2 class="font-bold text-primary">Corentin GS</h2></a></div><div class="navbar-end hidden text-xl lg:flex items-center"><ul class="menu menu-horizontal p-0"><li class="px-3"><select data-choose-theme class="select-bordered select-secondary select select-md max-w-xs bg-base-200 text-base-content"><option disabled selected>Pick your theme</option><option value="light">light</option><option value="dark">dark</option><option value="dracula">dracula</option><option value="memnix">memnix</option><option value="luxury">luxury</option><option value="cyberpunk">cyberpunk</option></select></li><li class="my-auto"><a class="hoveranimation hover:text-accent text-xl " rel="nofollow prefetch" href="/blog">Blog</a></li><li class="my-auto"><a class="hoveranimation hover:text-accent text-xl " rel="nofollow prefetch" href="/links">Contact</a></li></ul></div></div><!-- Page Slot --><div class="relative min-h-screen w-full bg-base-100 p-5"><div class="hoveranimation absolute left-1 top-[0.5rem] z-10 hidden lg:block"><a href="/blog" class="btn-ghost btn text-xl md:text-2xl lg:text-3xl" rel="prefetch"><svg viewBox="0 0 24 24" class="h-10 w-10" astro-icon="lucide:arrow-left"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m12 19-7-7 7-7m7 7H5"/></svg></a></div><div class="text-white relative mx-auto mb-4 w-full max-w-screen-lg md:mb-0" style="height: 24em"><img src="/_astro/mergesort-parallel.ca34db33_ZG3gpM.avif" class="absolute left-0 top-0 z-0 h-full w-full object-cover" alt="Merge Sort using Goroutines" loading="eager" aspectRatio="1.7777777777777777" width="1024" height="1024" decoding="async"><div class="absolute bottom-0 left-0 z-20 p-4"><span class="badge-secondary badge mb-2 inline-flex items-center justify-center px-4 py-1 uppercase">Programming</span><h1 class="text-4xl leading-tight">Merge Sort using Goroutines</h1><div class="mt-3 flex"><img src="/_astro/avatar.ab91b8c2_Z1L0Ey9.avif" loading="eager" alt="Corentin Giaufer Saubert" aspectRatio="1/1" class="mr-2 h-10 w-10 rounded-full object-cover" width="32" height="32" decoding="async"><div><div class="flex flex-col"><span>Corentin Giaufer Saubert</span><span>Jan. 15, 2023 ・6 min</span></div></div></div></div></div><div class="mx-auto mt-12 max-w-screen-lg px-4 text-lg leading-relaxed lg:px-0"><h2 id="parallel-merge-sort-vs-simple-merge-sort">Parallel Merge Sort vs Simple Merge Sort</h2>
<p>This is a simple example of how to use goroutines to <strong>parallelize</strong> a merge sort algorithm.
We compare the performance of a simple merge sort algorithm with a parallel merge sort algorithm that uses goroutines.</p>
 
<br/>
<h2 id="the-merge-sort-algorithm">The Merge Sort Algorithm</h2>
<p>The merge sort algorithm is a divide and conquer algorithm that recursively splits the input array into two halves,
sorts each half, and then merges the two sorted halves into a single sorted array.</p>
 
<br/>
<p>To speed up the merge sort algorithm, we use insertion sort for small subarrays (less than 12 elements).</p>
 
<br/>
<p>The implementation of the algorithm uses generics to allow sorting of any type of numbers.</p>
<pre class="astro-code dracula" style="background-color:#282A36;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">func</span><span style="color:#F8F8F2"> MergeSort[T Number](items []T) []T {</span></span>
<span class="line"><span style="color:#F8F8F2">	size </span><span style="color:#FF79C6">:=</span><span style="color:#F8F8F2"> </span><span style="color:#8BE9FD">len</span><span style="color:#F8F8F2">(items)</span></span>
<span class="line"><span style="color:#F8F8F2">	</span><span style="color:#FF79C6">if</span><span style="color:#F8F8F2"> size </span><span style="color:#FF79C6">&lt;</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">		</span><span style="color:#FF79C6">return</span><span style="color:#F8F8F2"> items</span></span>
<span class="line"><span style="color:#F8F8F2">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">	</span><span style="color:#FF79C6">if</span><span style="color:#F8F8F2"> size </span><span style="color:#FF79C6">&lt;</span><span style="color:#F8F8F2"> K {</span></span>
<span class="line"><span style="color:#F8F8F2">		</span><span style="color:#FF79C6">return</span><span style="color:#F8F8F2"> </span><span style="color:#8BE9FD">Insertionsort</span><span style="color:#F8F8F2">(items)</span></span>
<span class="line"><span style="color:#F8F8F2">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">	middle </span><span style="color:#FF79C6">:=</span><span style="color:#F8F8F2"> size </span><span style="color:#FF79C6">/</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">2</span></span>
<span class="line"><span style="color:#F8F8F2">	</span><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> a </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> </span><span style="color:#8BE9FD">MergeSort</span><span style="color:#F8F8F2">(items[:middle])</span></span>
<span class="line"><span style="color:#F8F8F2">	</span><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> b </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> </span><span style="color:#8BE9FD">MergeSort</span><span style="color:#F8F8F2">(items[middle:])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">	</span><span style="color:#FF79C6">return</span><span style="color:#F8F8F2"> </span><span style="color:#8BE9FD">merge</span><span style="color:#F8F8F2">(a, b)</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
 
<br/>
<h2 id="the-merge-sort-algorithm-with-goroutines">The Merge Sort Algorithm with Goroutines</h2>
<p>The parallel merge sort algorithm uses <strong>goroutines</strong> to sort the two halves of the input array in parallel.</p>
<p>To prevent the creation of too many goroutines, we use a <strong>threshold</strong> to determine when to use goroutines.
If the size of the input array is less than the threshold,
we use a simple merge sort algorithm instead of a parallel one.</p>
 
<br/>
<p>Here we use a threshold of 512 elements. We can benchmark the performance of the algorithm with
different thresholds to find the optimal threshold, but we will not do that in this example.</p>
<pre class="astro-code dracula" style="background-color:#282A36;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#6272A4">// ParallelMerge Perform merge sort on a slice using goroutines</span></span>
<span class="line"><span style="color:#FF79C6">func</span><span style="color:#F8F8F2"> ParallelMerge[T Number](items []T) []T {</span></span>
<span class="line"><span style="color:#F8F8F2">	</span><span style="color:#FF79C6">if</span><span style="color:#F8F8F2"> </span><span style="color:#8BE9FD">len</span><span style="color:#F8F8F2">(items) </span><span style="color:#FF79C6">&lt;</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">2</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">		</span><span style="color:#FF79C6">return</span><span style="color:#F8F8F2"> items</span></span>
<span class="line"><span style="color:#F8F8F2">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">	</span><span style="color:#6272A4">// Use a simple merge sort algorithm if the size of the input array is less than the threshold</span></span>
<span class="line"><span style="color:#F8F8F2">	</span><span style="color:#FF79C6">if</span><span style="color:#F8F8F2"> </span><span style="color:#8BE9FD">len</span><span style="color:#F8F8F2">(items) </span><span style="color:#FF79C6">&lt;</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">512</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">		</span><span style="color:#FF79C6">return</span><span style="color:#F8F8F2"> </span><span style="color:#8BE9FD">MergeSort</span><span style="color:#F8F8F2">(items)</span></span>
<span class="line"><span style="color:#F8F8F2">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">	</span><span style="color:#6272A4">// Create the wait group to wait for the goroutines to finish</span></span>
<span class="line"><span style="color:#F8F8F2">	</span><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> wg sync.WaitGroup</span></span>
<span class="line"><span style="color:#F8F8F2">	wg.</span><span style="color:#8BE9FD">Add</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">1</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">	</span><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> middle </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> </span><span style="color:#8BE9FD">len</span><span style="color:#F8F8F2">(items) </span><span style="color:#FF79C6">/</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">2</span><span style="color:#F8F8F2">  </span><span style="color:#6272A4">// Find the middle index of the input array</span></span>
<span class="line"><span style="color:#F8F8F2">	</span><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> a []T                   </span><span style="color:#6272A4">// Create a slice to hold the first half of the input array</span></span>
<span class="line"><span style="color:#F8F8F2">	</span><span style="color:#FF79C6">go</span><span style="color:#F8F8F2"> </span><span style="color:#FF79C6">func</span><span style="color:#F8F8F2">() {                </span><span style="color:#6272A4">// Create a goroutine to sort the first half of the input array</span></span>
<span class="line"><span style="color:#F8F8F2">		</span><span style="color:#FF79C6">defer</span><span style="color:#F8F8F2"> wg.</span><span style="color:#8BE9FD">Done</span><span style="color:#F8F8F2">()       </span><span style="color:#6272A4">// Decrement the wait group counter when the goroutine finishes</span></span>
<span class="line"><span style="color:#F8F8F2">		a </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> </span><span style="color:#8BE9FD">ParallelMerge</span><span style="color:#F8F8F2">(items[:middle]) </span><span style="color:#6272A4">// Sort the first half of the input array</span></span>
<span class="line"><span style="color:#F8F8F2">	}()</span></span>
<span class="line"><span style="color:#F8F8F2">	</span><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> b </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> </span><span style="color:#8BE9FD">ParallelMerge</span><span style="color:#F8F8F2">(items[middle:]) </span><span style="color:#6272A4">// Sort the second half of the input array</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">	wg.</span><span style="color:#8BE9FD">Wait</span><span style="color:#F8F8F2">() </span><span style="color:#6272A4">// Wait for the goroutine to finish</span></span>
<span class="line"><span style="color:#F8F8F2">	</span><span style="color:#FF79C6">return</span><span style="color:#F8F8F2"> </span><span style="color:#8BE9FD">merge</span><span style="color:#F8F8F2">(a, b) </span><span style="color:#6272A4">// Merge the two sorted halves</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
 
<br/>
<h2 id="benchmarking-the-merge-sort-algorithms">Benchmarking the Merge Sort Algorithms</h2>
<p>Now we can benchmark our merge sort algorithms to compare their <strong>performance</strong>.</p>
<p>To benchmark the algorithms, we use arrays of different sizes and <strong>measure the time</strong> it takes to sort the arrays.</p>
 
<br/>
<p>To run the benchmark we use the following command:</p>
<pre class="astro-code dracula" style="background-color:#282A36;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#50FA7B">go</span><span style="color:#F8F8F2"> </span><span style="color:#F1FA8C">test</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">-bench=.</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">-benchtime</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">5</span><span style="color:#F1FA8C">s</span><span style="color:#F8F8F2"> </span><span style="color:#FF79C6">&gt;</span><span style="color:#F8F8F2"> </span><span style="color:#F1FA8C">benchmark.txt</span><span style="color:#F8F8F2"> &amp;&amp; </span><span style="color:#50FA7B">benchstat</span><span style="color:#F8F8F2"> </span><span style="color:#F1FA8C">benchmark.txt</span></span></code></pre>
 
<br/>
<p>Benchstat is a tool that can be used to compare the results of benchmarks.</p>
<p>The results of the benchmark are as follows:</p>
<pre class="astro-code dracula" style="background-color:#282A36;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#50FA7B">name</span><span style="color:#F8F8F2">                                   </span><span style="color:#F1FA8C">time/op</span></span>
<span class="line"><span style="color:#50FA7B">Mergesort/1000</span><span style="color:#F8F8F2">                     </span><span style="color:#BD93F9">14.6</span><span style="color:#F1FA8C">µs</span><span style="color:#F8F8F2"> </span><span style="color:#F1FA8C">±</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">0</span><span style="color:#F1FA8C">%</span></span>
<span class="line"><span style="color:#50FA7B">Mergesort/10000</span><span style="color:#F8F8F2">                     </span><span style="color:#BD93F9">473</span><span style="color:#F1FA8C">µs</span><span style="color:#F8F8F2"> </span><span style="color:#F1FA8C">±</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">0</span><span style="color:#F1FA8C">%</span></span>
<span class="line"><span style="color:#50FA7B">Mergesort/100000</span><span style="color:#F8F8F2">                   </span><span style="color:#BD93F9">6.33</span><span style="color:#F1FA8C">ms</span><span style="color:#F8F8F2"> </span><span style="color:#F1FA8C">±</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">0</span><span style="color:#F1FA8C">%</span></span>
<span class="line"><span style="color:#50FA7B">Mergesort/1000000</span><span style="color:#F8F8F2">                  </span><span style="color:#BD93F9">87.4</span><span style="color:#F1FA8C">ms</span><span style="color:#F8F8F2"> </span><span style="color:#F1FA8C">±</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">0</span><span style="color:#F1FA8C">%</span></span>
<span class="line"></span>
<span class="line"><span style="color:#50FA7B">MergesortWithGoroutines/1000</span><span style="color:#F8F8F2">       </span><span style="color:#BD93F9">18.7</span><span style="color:#F1FA8C">µs</span><span style="color:#F8F8F2"> </span><span style="color:#F1FA8C">±</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">0</span><span style="color:#F1FA8C">%</span></span>
<span class="line"><span style="color:#50FA7B">MergesortWithGoroutines/10000</span><span style="color:#F8F8F2">       </span><span style="color:#BD93F9">217</span><span style="color:#F1FA8C">µs</span><span style="color:#F8F8F2"> </span><span style="color:#F1FA8C">±</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">0</span><span style="color:#F1FA8C">%</span></span>
<span class="line"><span style="color:#50FA7B">MergesortWithGoroutines/100000</span><span style="color:#F8F8F2">     </span><span style="color:#BD93F9">2.71</span><span style="color:#F1FA8C">ms</span><span style="color:#F8F8F2"> </span><span style="color:#F1FA8C">±</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">0</span><span style="color:#F1FA8C">%</span></span>
<span class="line"><span style="color:#50FA7B">MergesortWithGoroutines/1000000</span><span style="color:#F8F8F2">    </span><span style="color:#BD93F9">29.0</span><span style="color:#F1FA8C">ms</span><span style="color:#F8F8F2"> </span><span style="color:#F1FA8C">±</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">0</span><span style="color:#F1FA8C">%</span></span></code></pre>
 
<br/>
<p>As we can see, the parallel merge sort algorithm is <strong>much faster</strong> than the simple merge sort algorithm for <strong>large arrays</strong>.</p>
 
<br/>
<h2 id="why-is-the-parallel-merge-sort-algorithm-faster">Why is the Parallel Merge Sort Algorithm Faster?</h2>
<p>The parallel merge sort algorithm is faster because it uses goroutines to sort the two halves of the input array in <strong>parallel</strong>.
The simple merge sort algorithm sorts the two halves of the input array <strong>sequentially</strong>.</p>
 
<br/>
<p>As discussed in the previous article, the cost of <strong>creating a goroutine can be high</strong>.
So we should use a parallel merge sort algorithm only when the size of the input array is <strong>large enough to justify the cost</strong> of creating goroutines.</p>
 
<br/>
<h2 id="conclusion">Conclusion</h2>
<p>In this example, we have seen how to use <strong>goroutines to parallelize</strong> a merge sort algorithm. We have also benchmarked the performance of the merge sort algorithms to compare their performance.
Goroutines are a <strong>powerful tool</strong> that should be used <strong>only when the cost of creating goroutines is justified</strong> by the performance improvement.</p>
<p>In this example, the code isn’t more complex when using goroutines therefore it’s worth using them.</p>
<h2 id="code">Code</h2>
<p>The code for this article can be found on <a href="https://github.com/CorentinGS/go-teaching/tree/main/goroutines_merge_sort" class="font-bold underline text-accent"> GitHub </a></p></div></div><div class="fixed bottom-5 right-5 hoveranimation btn-accent btn-sm btn hidden" id="btn-back-to-top"><svg viewBox="0 0 24 24" class="h-6 w-6" astro-icon="lucide:arrow-up"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m5 12 7-7 7 7m-7 7V5"/></svg></div><input type="checkbox" id="my-modal-6" class="modal-toggle"><label for="my-modal-6" class="modal cursor-pointer modal-bottom sm:modal-middle"><label class="modal-box relative" for=""><ul class="menu w-80 overflow-y-auto bg-base-100 p-4"><li class="py-3"><select data-choose-theme class="select-bordered select-secondary select select-md max-w-xs bg-base-200 text-base-content"><option disabled selected>Pick your theme</option><option value="light">light</option><option value="dark">dark</option><option value="dracula">dracula</option><option value="memnix">memnix</option><option value="luxury">luxury</option><option value="cyberpunk">cyberpunk</option></select></li><li class="py-3"><select onchange="location = this.value;" class="my-select-class select-bordered select-secondary select select-md w-full max-w-xs bg-base-200 text-base-content"><option value="/blog/mergesort-parallel" selected="true">🇺🇸 English</option><option value="/fr/blog/mergesort-parallel">🇫🇷 Français</option><option value="/de/blog/mergesort-parallel">🇩🇪 Deutsch</option></select></li><li><a href="/blog" rel="nofollow prefetch">Blog</a></li><li><a href="/links" rel="nofollow prefetch">Contact</a></li></ul></label></label></main></body></html><script type="text/javascript">
    mybutton = document.getElementById("btn-back-to-top");

    document.addEventListener('astro:page-load', () => {
        const backToTop = () => {
            window.scrollTo({top: 0, behavior: "smooth"});
        };
        const onScroll = () => {
            if (document.body.scrollTop > 10 || document.documentElement.scrollTop > 10) {
                mybutton.classList.remove("hidden");
            } else {
                mybutton.classList.add("hidden");
            }
        };
        // When the user clicks on the button, scroll to the top of the document
        mybutton.addEventListener("click", backToTop);
        window.addEventListener("scroll", onScroll);
    }, {once: true});
</script>