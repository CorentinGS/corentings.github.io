---

import {themeChange} from "theme-change";---

<script is:inline>
    // ‚òùÔ∏è This script prevent the FART effect.
    if (localStorage.getItem('theme') === null) {
        document.documentElement.setAttribute('data-theme', 'dark')
    } else document.documentElement.setAttribute('data-theme', localStorage.getItem('theme'))
    // "theme" LocalStorage value is set by the package to remember user preference.
    // The value is checked and applyed before rendering anything.
</script>
<script>
    import { themeChange } from 'theme-change'

    const setTheme = () => {
        if (localStorage.getItem('theme') === null) {
            document.documentElement.setAttribute('data-theme', 'dark')
        } else document.documentElement.setAttribute('data-theme', localStorage.getItem('theme'))

        console.log('Theme set to ' + localStorage.getItem('theme'))
    }
    themeChange()

    setTheme()

    // üëÜ you could import the CDN directly instead of these two lines

    document.addEventListener('astro:after-swap', setTheme)
</script>
