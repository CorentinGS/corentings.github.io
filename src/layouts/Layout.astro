---
import '../styles/global.css'
import i18next, { t } from 'i18next'
import HeadHrefLangs from '../components/utils/HeadHrefLangs.astro'
import { LanguageSelector } from 'astro-i18next/components'
import ThemeSwitcher from '../components/utils/ThemeSwitcher.astro'
import { Schema } from 'astro-seo-schema'

import { localizePath } from 'astro-i18next'

import { ViewTransitions } from 'astro:transitions'

// Import fonts
import '@fontsource/syne'
import '@fontsource/nunito'
import { Icon } from 'astro-iconify'
import SEO from '../components/utils/Schema.astro'
import { themeChange } from 'theme-change'
import Header from '../components/utils/Header.astro'
import BaseHead from "../components/utils/BaseHead.astro";

export interface Props {
	title: string
}

const { title, description } = Astro.props
---

<!doctype html>
<html lang={i18next.language}>
	<head>
		<title>Corentin Giaufer Saubert„ÉªFreelance„ÉªGolang„ÉªChess Lover</title>

		<ViewTransitions fallback='swap' />

		<BaseHead />


		<script is:inline>
			// ‚òùÔ∏è This script prevent the FART effect.
			if (localStorage.getItem('theme') === null) {
				document.documentElement.setAttribute('data-theme', 'dark')
			} else document.documentElement.setAttribute('data-theme', localStorage.getItem('theme'))
			// "theme" LocalStorage value is set by the package to remember user preference.
			// The value is checked and applyed before rendering anything.
		</script>
		<script>
			import { themeChange } from 'theme-change'

			const setTheme = () => {
				if (localStorage.getItem('theme') === null) {
					document.documentElement.setAttribute('data-theme', 'dark')
				} else document.documentElement.setAttribute('data-theme', localStorage.getItem('theme'))

				console.log('Theme set to ' + localStorage.getItem('theme'))
			}
			themeChange()

			setTheme()

			// üëÜ you could import the CDN directly instead of these two lines

			document.addEventListener('astro:after-swap', setTheme)
		</script>


		<HeadHrefLangs />

	</head>
	<body>
		<main>
			<!-- Navbar -->
			<Header lang={true} />
			<!-- Page Slot -->
			<slot />

			<input type='checkbox' id='my-modal-6' class='modal-toggle' />
			<label for='my-modal-6' class='modal modal-bottom cursor-pointer sm:modal-middle'>
				<label class='modal-box relative' for=''>
					<ul class='menu w-80 overflow-y-auto bg-base-100 p-4'>
						<li class='py-3'>
							<ThemeSwitcher class='mx-auto w-full' />
						</li>
						<li class='py-3'>
							<LanguageSelector
								showFlag={true}
								class='my-select-class select select-bordered select-secondary select-md w-full max-w-xs bg-base-200 text-base-content'
							/>
						</li>
						<li>
							<a
								href={localizePath('/projects')}
								data-astro-prefetch='tap'
								class='text-md font-semibold leading-6'>Projects</a
							>
						</li>
						<li>
							<a
								href={localizePath('/talks')}
								data-astro-prefetch='tap'
								class='text-md font-semibold leading-6'>Talks</a
							>
						</li>
						<li>
							<a
								href={localizePath('/experiences')}
								data-astro-prefetch='tap'
								class='text-md font-semibold leading-6'>Experiences</a
							>
						</li>
						<li>
							<a
								href={localizePath('/blog')}
								data-astro-prefetch='tap'
								class='text-md font-semibold leading-6'>Articles</a
							>
						</li>
					</ul>
				</label>
			</label>
		</main>
	</body>
</html>
